<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>{{ app_title }} â€” Edit Question</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    .form { max-width: 900px; margin: 2rem auto; background: rgba(26,31,40,0.6); padding: 1.5rem; border-radius: 10px; }
    label { display:block; color:#b3b3b3; margin-bottom:0.25rem; font-weight:600 }
    input, textarea, select { width:100%; padding:0.6rem 0.8rem; border-radius:8px; border:1px solid rgba(187,134,252,0.12); background: rgba(255,255,255,0.02); color: #e0e0e0 }
    textarea { min-height: 120px }
    .actions { display:flex; gap:0.6rem; margin-top:1rem }
    .primary { background: linear-gradient(135deg,#1f88ff 0%,#bb86fc 100%); color:white; padding:0.6rem 1rem; border-radius:8px; text-decoration:none }
    .secondary { background: rgba(187,134,252,0.08); color:#bb86fc; padding:0.6rem 1rem; border-radius:8px; }
    .img-preview { margin-top:0.5rem }
    .img-preview img { width:320px; height:220px; object-fit:contain; background:white; padding:6px; border-radius:6px; border:1px solid rgba(187,134,252,0.12) }
  </style>
</head>
<body>
  <main class="container">
    <div class="form">
      <h2>Edit Question</h2>
      <form method="post" action="{{ url_for('admin_update_question') }}" enctype="multipart/form-data">
        <input type="hidden" name="id" value="{{ q.id }}" />
        <label>Question ID</label>
        <input type="text" name="question_id" value="{{ q.question_id }}" readonly />
        <label>Text</label>
        <textarea name="text">{{ q.text }}</textarea>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:0.8rem;">
          <div>
            <label>Option A</label>
            <input type="text" name="option_a" value="{{ q.option_a }}" />
            <label>Option B</label>
            <input type="text" name="option_b" value="{{ q.option_b }}" />
          </div>
          <div>
            <label>Option C</label>
            <input type="text" name="option_c" value="{{ q.option_c }}" />
            <label>Option D</label>
            <input type="text" name="option_d" value="{{ q.option_d }}" />
          </div>
        </div>
        <label>Correct Option (a/b/c/d)</label>
        <select name="correct_option">
          <option value="a" {% if q.correct_option=='a' %}selected{% endif %}>A</option>
          <option value="b" {% if q.correct_option=='b' %}selected{% endif %}>B</option>
          <option value="c" {% if q.correct_option=='c' %}selected{% endif %}>C</option>
          <option value="d" {% if q.correct_option=='d' %}selected{% endif %}>D</option>
        </select>
        <label>Current Image</label>
        <div class="img-preview">
          {% if q.image_url %}
            <img src="{{ url_for('static', filename=q.image_url) }}" alt="Current" />
            <div style="margin-top:0.6rem;">
              <label style="display:inline-block; color:#ffb4b4; font-weight:600;">Delete current image?</label>
              <input type="checkbox" name="delete_image" value="1" style="margin-left:0.6rem; vertical-align:middle;" />
            </div>
          {% else %}
            <div style="color:#888;">No image set</div>
          {% endif %}
        </div>
        <label>Upload New Image (optional)</label>
        <input type="file" name="image" accept="image/*">
        <div class="actions">
          <button class="primary" type="submit">Save Changes</button>
          <a class="secondary" href="{{ url_for('admin_questions') }}">Cancel</a>
        </div>
      </form>
    </div>
  </main>
</body>
</html>